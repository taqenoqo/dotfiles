*
  box-sizing: border-box

font-size = 10pt
margin-top-bottom = 1in
margin-left-right = 1in
a4-width = 210mm
threshold-width = unit((a4-width / font-size) * 1.1, 'rem')
main-font = "Hiragino Mincho ProN", "Noto Serif CJK JP"
sans-font = "Hiragino Sans", "Noto Sans CJK JP"
mono-font = "Courier New"
main-indent = 1rem

:root
  @media screen
    @media (min-width: threshold-width)
      font-size: 14px
    @media (max-width: threshold-width)
      font-size: 13px

  @media print
    font-size: font-size

@media print
  @page
    size: A4
    margin: margin-top-bottom margin-left-right

  img, pre, blockquote, table, figure
    page-break-inside: avoid


body
  background-color: #fff
  color: #111
  font-family: main-font
  font-weight: 300
  line-height: 1.5
  word-wrap: break-word
    
  @media screen
    @media (min-width: threshold-width)
      width: unit(a4-width / font-size, 'rem')
      margin: 0.5rem auto
      padding: unit(margin-top-bottom / font-size, 'rem') unit(margin-left-right / font-size, 'rem')
      box-shadow: 0 0 0 1px #ddd, 0 0 0 4px #eee
      border-radius: 0.5rem

    @media (max-width: threshold-width)
      padding: 4rem 1rem

  @media print
    width: a4-width - margin-left-right * 2
    color: #000

main
  overflow: hidden

  & > :first-child
    margin-top: 0

  & > :last-child
    margin-bottom: 0

a
  color: #47c

figure
  text-align: center
  margin: 2rem 0.5rem

  & > img
    margin: 1rem auto

img
  max-width: 60%
  display: block
  margin: 2rem auto

p
  margin: 1rem main-indent
  text-indent: 1em

h1, h2, h3, h4, h5, h6
  font-family: sans-font
  font-weight: 500
  margin-top: 1.25em
  margin-bottom: 0.75em

  & + *:not(h1):not(h2):not(h3):not(h4):not(h5):not(h6)
    margin-top: 0

heading-coef = 1.2
heading-base = (1/1.2)rem

h1
  font-size: (heading-coef ** 5 * heading-base)
  border-bottom: 1px solid #888
  color: #000

h2
  font-size: (heading-coef ** 4 * heading-base)
  border-bottom: 1px solid #aaa
  color: #111

h3
  font-size: (heading-coef ** 3 * heading-base)
  color: #222

h3::before
  content: ""
  display: inline-block
  background-color: #555
  height: 0.75em
  width: 0.75em
  margin-right: 0.4rem
  vertical-align: (0.4em - @height / 2)

h4
  font-size: (heading-coef ** 2 * heading-base)
  margin-left: (main-indent * 1/3)
  color: #333

h4::before
  content: ""
  display: inline-block
  background-color: #555
  height: 0.6em
  width: 0.6em
  margin-right: 0.6rem
  vertical-align: (0.4em - @height / 2)
  border-radius: 50%

h5
  font-size: (heading-coef ** 1 * heading-base)
  margin-left: (main-indent * 2/3)
  color: #333

h6
  font-size: (heading-coef ** 0 * heading-base)
  margin-left: main-indent
  color: #444


blockquote
  padding: 0 1rem
  color: #777
  border-left: 4px solid #ddd
  margin: 1rem 0

  @media print
    color: #555
    border-color: #bbb

  & > :first-child
    margin-top: 0

  & > :last-child
    margin-bottom: 0

ul, ol
  padding-left: 2rem
  margin: 1rem

  & > :first-child
    margin-top: 0

  & > :last-child
    margin-bottom: 0

li
  margin: 0.5rem 0

  & > *
    margin: 0.5rem 0

  & > :not(ul,ol)
    &:first-child
      text-indent: 0
      margin-top: 0

    &:last-child
      margin-bottom: 0

    &:not(:first-child)
      padding-left: 0.5rem


table
  margin: 1rem
  border-collapse: collapse

  tr
    background-color: #fff
    border-top: 1px solid #ccc

    &:nth-child(2n)
      background-color: #f8f8f8

  th, td
    border: 1px solid #ccc
    padding: 0.4rem 0.8rem

  th
    font-weight: bold

hr
  border: none
  border-top: 1px solid
  color: #aaa
  padding: 0
  margin: 2rem 0
  
dl
  margin-top: 1rem
  margin-left: 1rem
  margin-right: 1rem

  dt
    text-decoration: underline #222

  dd
    margin-left: 2rem

pre, code, pre *
  font-family: mono-font 
  overflow-wrap: normal
  word-break: keep-all
  white-space: pre
  overflow: scroll !important
  text-overflow: ellipsis

  @media print
    overflow: visible !important

pre, code
  font-size: 0.9em
  background-color: #f8f8f8
  border: 1px solid #ddd

  @media print
    background-color: #eee
    border-color: #ccc

code
  border-radius: 0.2rem
  padding: 0.1rem 0.2rem
  vertical-align: 0.2em

pre
  border-radius: 0.4rem
  padding: 0.6rem 0.8rem 
  margin-left: 1rem !important
  margin-right: 1rem !important

  & > code
    padding: 0
    border: 0
    vertical-align: baseline

  & > span.kw { color: #a26; } // Key Word
  & > span.dt { color: #08b; } // Data Type
  & > span.dv { color: #08b; } // Decimal Value
  & > span.bn { color: #08b; } // BaseNTok
  & > span.fl { color: #08b; } // Float
  & > span.ch { color: #239; } // Char
  & > span.st { color: #239; } // String
  & > span.co { color: #9a9; } // Comment
  & > span.ot { color: #86a; } // Other Token
  & > span.al { color: #f00; font-weight: bold; } // Alert
  & > span.fu { color: #a26; } // Function
  & > span.er { color: #f00; font-weight: bold; } // Error

section.footnotes
 
  a.footnote-back
    text-decoration: none
    margin-left: 0.5rem

a.footnote-ref
  text-decoration: none

  & > sup

    &::before
      content: "["

    &::after
      content: "]"

.page-break
  @media print
    page-break-after: always
    visibility: hidden
    margin: 0
    padding: 0
    border: 0
    height: 0

.right
  text-align: right

